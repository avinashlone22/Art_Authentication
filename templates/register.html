{% extends "base.html" %}

{% block title %}Register{% endblock %}

{% block content %}
  <h2 style="text-align: center; margin-bottom: 20px;">Register</h2>

  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      {% for category, message in messages %}
        <div style="color: red; text-align: center; margin-bottom: 15px;">
          {{ message }}
        </div>
      {% endfor %}
    {% endif %}
  {% endwith %}

  <form id="registerForm" method="POST"
        style="max-width: 400px; margin: 0 auto; padding: 20px; border: 1px solid #ccc; border-radius: 8px;">

    <div style="margin-bottom: 15px;">
      <label for="username" style="font-weight: bold;">Username:</label><br>
      <input
        type="text"
        id="username"
        name="username"
        placeholder="Choose a username"
        required
        style="width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 4px;">
    </div>

    <div style="margin-bottom: 20px;">
      <label for="password" style="font-weight: bold;">Password:</label><br>
      <input
        type="password"
        id="password"
        name="password"
        placeholder="Choose a password"
        required
        minlength="6"
        style="width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 4px;">
    </div>

    <button
      type="submit"
      style="width: 100%; padding: 10px; background-color: #2196F3; color: white; border: none; border-radius: 4px; font-weight: bold;">
      Register
    </button>
  </form>

  <script>
    document.getElementById("registerForm").addEventListener("submit", function(event) {
      const username = document.getElementById("username").value.trim();
      const password = document.getElementById("password").value;

      if (/^\d+$/.test(username)) {
        alert("Username cannot be only numbers.");
        event.preventDefault();
        return;
      }

      if (password.length < 6) {
        alert("Password must be at least 6 characters long.");
        event.preventDefault();
        return;
      }
    });
  </script>
{% endblock %}
